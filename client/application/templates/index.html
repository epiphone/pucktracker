{% extends "base.html" %}
{% block content %}

<!-- Jos käyttäjä ei seuraa vielä mitään, näytetään selite ja linkit hakuihin -->
$ if teams == []:
    $ if players == []:
        <h2> Et seuraa vielä yhtään pelaajaa tai joukkuetta.</h2>
        <p> Voit lisätä pelaajia ja joukkeita seurantaan joukkue- ja pelaajasivuilla. </p>
        <a href="/menu" data-role="button" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Palaa valikkoon</span></span></a>
        <div class="ui-body ui-body-b">
            <h3>Kokeile myös:</h3>
            <a href="/player" data-role="button" data-theme="c" data-icon="search" data-inline="true" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-icon-left ui-btn-up-b"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Pelaajahaku</span><span class="ui-icon ui-icon-search ui-icon-shadow">&nbsp;</span></span></a>
            <a href="/team" data-role="button" data-theme="c" data-icon="search" data-inline="true" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-icon-left ui-btn-up-c"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Joukkuehaku</span><span class="ui-icon ui-icon-search ui-icon-shadow">&nbsp;</span></span></a>
        </div>
    $endif
$endif

$ if players:
    $ for p in players:
    <div class="ui-body ui-body-c">
        <p><a href="/players/{{p['stats']['pid']}}">{{p['stats']['name'] | shorten_name}}</a></p>
        <div class="keystats">
            <ul>
                <li><strong>G</strong><br>{{ p['stats']['g'] }}</li>
                <li><strong>A</strong><br>{{ p['stats']['a'] }}</li>
                <li><strong>PTS</strong><br>{{ p['stats']['pts'] }}</li>
                <li><strong>+/-</strong><br>{{ p['stats']['+/-'] }}</li>
                <li><strong>PIM</strong><br>{{ p['stats']['pim'] }}</li>
            </ul>
        </div>
        <br>
        <p>Viimeisin ottelu:</p> <a href="/game/{{p['latest_game']['date']}}">{{jinja_utils.convert_date(p['latest_game']['date'])}} {{p['latest_game']['opponent']|upper}}</a>
        <div class="keystats">
            <br>
            <ul>
                <li><strong>G</strong><br>{{ p['latest_game']['g'] }}</li>
                <li><strong>A</strong><br>{{ p['latest_game']['a'] }}</li>
                <li><strong>PTS</strong><br>{{ p['latest_game']['pts'] }}</li>
                <li><strong>+/-</strong><br>{{ p['latest_game']['+/-'] }}</li>
                <li><strong>PIM</strong><br>{{ p['latest_game']['pim'] }}</li>
            </ul>
        </div>
        <p>TODO: seuraava ottelu</p>
    </div>
    $ endfor
$ endif

$ if teams:
    <h2>Joukkueet</h2>
    $ for t in teams:
        <div class="ui-body ui-body-b">
            <p><a href="/teams/{{t['id']}}">{{TEAMS[t['id']]}}</a></p>
            <div class="keystats">
                <ul>
                    <li><strong>W</strong><br>{{ t['stats']['w'] }}</li>
                    <li><strong>L</strong><br>{{ t['stats']['l'] }}</li>
                    <li><strong>OTL</strong><br>{{ t['stats']['otl'] }}</li>
                    <li><strong>PTS</strong><br>{{ t['stats']['pts'] }}</li>
                    <li><strong>L10</strong><br>{{ t['stats']['last 10'] }}</li>
                </ul>
            </div>
        <p>Viimeisin ottelu:</p>
        <a href="/game/{{ t['latest_game']['date'] }}">{{ jinja_utils.convert_date(t['latest_game']['date']) }}
        {{ t['latest_game']['opponent']|shorten_game }} <strong> {{ t['latest_game']['score'] }}</a></strong>
        <p>TODO: seuraava ottelu</p>
        </div>
    $ endfor
$ endif

{% endblock %}
